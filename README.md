# Система генерации уникальных чисел с использованием Redis

Это приложение демонстрирует работу с очередью Redis для генерации уникальных чисел в заданном диапазоне с множественными производителями и одним потребителем.

## Требования

- Node.js (14+)
- Redis (должен быть установлен и запущен)
- npm или yarn
- Docker и Docker Compose (опционально)

## Установка

1. Клонируйте репозиторий:
```bash
git clone git@github.com:DrAIex/Redis_test.git
cd redis_test
```

2. Установите зависимости:
```bash
npm install
```

3. Настройте параметры в файле `.env`:
```
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_QUEUE_NAME=number_queue
PRODUCERS_COUNT=5
NUMBERS_RANGE=100
RESULT_FILE=result.json
```

## Запуск

### Локальный запуск

Запустить приложение с автоматическим запуском производителей и потребителя:

```bash
npm start
```

Запустить компоненты по отдельности:

```bash
npm run producer 1  # запустить производителя с ID 1
npm run consumer    # запустить потребителя
```

### Запуск в режиме разработки

Для запуска с автоматической перезагрузкой при изменении кода:

```bash
npm run dev
```

### Сборка проекта

Для компиляции TypeScript в JavaScript:

```bash
npm run build
```

### Запуск в Docker

Сборка и запуск с помощью Docker Compose:

```bash
npm run docker:build  # собрать Docker-образ
npm run docker:up     # запустить контейнеры
npm run docker:down   # остановить и удалить контейнеры
```

## Тестирование

Запуск юнит-тестов:

```bash
npm test
```

## Результаты

После завершения работы, результат сохраняется в файл, указанный в переменной `RESULT_FILE`.

Формат результата:
```json
{
  "timeSpent": 1234,
  "numbersGenerated": [0, 1, 2, 3, ...],
  "metrics": {
    "totalMessagesProcessed": 1500,
    "duplicatesCount": 500,
    "processingRate": 250.5,
    "completionPercentage": 100
  }
}
```

## Описание работы

- **Производители**: Генерируют случайные числа в диапазоне [0, N] и отправляют их в очередь Redis.
- **Потребитель**: Читает числа из очереди, сохраняет уникальные значения с метаданными, и когда все возможные числа в диапазоне сгенерированы, сохраняет результат в JSON-файл.
